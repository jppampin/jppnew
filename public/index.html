<html lang="en" ng-app="StarterApp">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/angular_material/0.7.1/angular-material.min.css">
    <link rel="stylesheet" type="text/css" href="css/app.css">
    <link rel="stylesheet" type="text/css" href="/bower_components/angular-loading-bar/build/loading-bar.min.css">
  </head>
  <body layout="column" ng-controller="AppCtrl" ng-cloak>
    <md-toolbar layour="row">
    <div class="md-toolbar-tools">
      <button ng-click="toggleSidenav('left')" class="menuBtn">
        <span class="visually-hidden">Menu</span>
      </button>
      <h1><span>JPP Site</span></h1>
      </div>
    </md-toolbar>
    <div layout="row" flex>
        <md-sidenav layout="column" class="md-sidenav-left md-whiteframe-z2" md-component-id="left" >
          TODO: build sections
        </md-sidenav>
        <div layout="column" flex id="content" ng-cloak>
            <md-list>
            <md-item ng-repeat="row in rows">
            <md-item-content layout="column" layout-gt-sm="row" layout-align="center start">
            <!-- Column 1 -->
            <div flex>
                <md-subheader class="md-primary">{{row.source1}}</md-subheader>
                <md-list> 
                  <md-item ng-repeat="item in row.articles1">
                    <md-item-content>
                    <!-- Single Line Title -->
                      <div class="md-tile-content" ng-if="!item.expanded" ng-click="item.expanded = !item.expanded" >
                        <h3>{{item.title}} </h3> 
                      </div>
                     <!-- End Single Line Title -->

                    <!-- Article Details -->
                      <div class="md-tile-content" ng-if="item.expanded" ng-click="item.expanded = !item.expanded" >
                        <h3>{{item.title}}</h3>
                        <h4>{{item.pubDate}}</h4>
                        <p layout-wrap ng-bind-html="item.description"></p>
                        <div layout="column" layout-align="center end" layout-padding>
                        <div>
                        <md-button ng-href="{{item.link}}" class="md-raised md-primary"> Ver articulo completo... </md-button>                        
                        </div>
                        </div>
                      </div>
                    <!-- End Article Details -->
                    </md-item-content>
                    <md-divider ng-if="!$last"></md-divider>
                    <div layout="column" layout-align="center end" layout-padding>
                    <div>
                    <md-button ng-href="#" ng-click="showMore(row, 1);" class="md-primary" ng-if="$last && row.showMore1">Ver mas articulos...</md-button>
                    </div>
                     </div>
                  </md-item>
                </md-list>

            </div>        
            <!-- End Column 1 -->

            <!-- Column 2 -->
            <div flex>
                <md-subheader class="md-primary">{{row.source2}}</md-subheader>
                <md-list> 
                  <md-item ng-repeat="item in row.articles2">
                    <md-item-content>
                    <!-- Single Line Title -->
                      <div class="md-tile-content" ng-if="!item.expanded" ng-click="item.expanded = !item.expanded" >
                        <h3>{{item.title}} </h3>
                      </div>
                     <!-- End Single Line Title -->

                    <!-- Article Details -->
                    <div class="md-tile-content" ng-if="item.expanded" ng-click="item.expanded = !item.expanded">
                        <h3>{{item.title}}</h3>
                        <h4>{{item.pubDate}}</h4>
                        <p layout-wrap ng-bind-html="item.description"></p>
                        <div layout="column" layout-align="center end" layout-padding>
                        <div>
                        <md-button ng-href="{{item.link}}" class="md-raised md-primary"> Ver articulo completo... </md-button>                        
                        </div>
                        </div>
                      </div>
                    <!-- End Article Details -->
                    </md-item-content>
                    <md-divider ng-if="!$last"></md-divider>
                    <div layout="column" layout-align="center end" layout-padding>
                    <div>
                    <md-button ng-href="#" ng-click="showMore(row, 2);" class="md-primary" ng-if="$last && row.showMore2">Ver mas articulos...</md-button>
                    </div>
                     </div>
                  </md-item>
                </md-list>
            </div>        
            <!-- End Column 2 -->

            <!-- Column 3 -->
            <div flex>
                <md-subheader class="md-primary">{{row.source3}}</md-subheader>
                <md-list> 
                  <md-item ng-repeat="item in row.articles3">
                    <md-item-content>
                     <!-- Single Line Title -->
                      <div class="md-tile-content" ng-if="!item.expanded" ng-click="item.expanded = !item.expanded" >
                        <h3>{{item.title}} </h3> 
                      </div>
                     <!-- End Single Line Title -->

                    <!-- Article Details -->
                      <div class="md-tile-content" ng-if="item.expanded" ng-click="item.expanded = !item.expanded">
                        <h3>{{item.title}}</h3>
                        <h4>{{item.pubDate}}</h4>
                        <p layout-wrap ng-bind-html="item.description"></p>
                        <div layout="column" layout-align="center end" layout-padding>
                        <div>
                        <md-button ng-href="{{item.link}}" class="md-raised md-primary"> Ver articulo completo... </md-button>                        
                        </div>
                        </div>
                      </div>
                    <!-- End Article Details -->
                    </md-item-content>
                    <md-divider ng-if="!$last"></md-divider>
                    <div layout="column" layout-align="center end" layout-padding>
                    <div>
                    <md-button ng-href="#" ng-click="showMore(row, 3);" class="md-primary" ng-if="$last && row.showMore3">Ver mas articulos...</md-button>
                    </div>
                     </div>
                  </md-item>
                </md-list>
            </div>        
            <!-- End Column 3 -->
            <md-item-content>
            </md-item>
            </md-list>
        </div>
    </div>
    
    <!-- Angular Material Dependencies -->
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.6/angular.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.6/angular-sanitize.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.6/angular-animate.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.6/angular-aria.min.js"></script>

    <script src="//ajax.googleapis.com/ajax/libs/angular_material/0.7.1/angular-material.min.js"></script>
    <script src="/bower_components/angular-loading-bar/build/loading-bar.min.js"></script>
    <script src="/bower_components/underscore/underscore-min.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
  </body>
